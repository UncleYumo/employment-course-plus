<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é’äº‘æ‰“åœ°é¼ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .game-container {
            width: 95%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            margin-bottom: 15px;
        }

        .score-board {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 18px;
        }

        .time-board {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 18px;
        }

        .game-title {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .hole {
            aspect-ratio: 1/1;
            background: #8B4513;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 8px 0 rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .hole::before {
            content: '';
            position: absolute;
            width: 80%;
            height: 20%;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            bottom: 10%;
        }

        .mole {
            width: 90%;
            height: 90%;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .mole.up {
            transform: translateY(0);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-start {
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
            color: white;
        }

        .btn-stop {
            background: linear-gradient(45deg, #f44336, #ff9800);
            color: white;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .game-message {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            border-radius: 20px;
        }

        .message-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 80%;
        }

        .message-title {
            font-size: 32px;
            margin-bottom: 20px;
            color: #FFD700;
        }

        .final-score {
            font-size: 24px;
            margin: 20px 0;
        }

        .hidden {
            display: none;
        }

        .instructions {
            margin: 15px 0;
            font-size: 16px;
            line-height: 1.5;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
        }

        .sound-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .sound-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .sound-btn.active {
            background: #4CAF50;
        }

        @media (max-width: 500px) {
            .game-container {
                width: 98%;
                padding: 15px;
            }

            .game-title {
                font-size: 24px;
            }

            .score-board, .time-board {
                font-size: 16px;
                padding: 8px 15px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
<div class="game-container">
    <div class="game-header">
        <div class="score-board">å¾—åˆ†: <span id="score">0</span></div>
        <div class="time-board">æ—¶é—´: <span id="time">30</span>s</div>
    </div>

    <h1 class="game-title">é’äº‘æ‰“åœ°é¼ </h1>

    <div class="instructions">
        ç‚¹å‡»å‡ºç°çš„é’äº‘å¤´åƒå¾—åˆ†ï¼30ç§’å†…å¾—åˆ†è¶Šé«˜è¶Šå¥½ï¼
    </div>

    <div class="game-board" id="gameBoard">
        <!-- åœ°é¼ æ´å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
    </div>

    <div class="controls">
        <button class="btn btn-start" id="startBtn">å¼€å§‹æ¸¸æˆ</button>
        <button class="btn btn-stop" id="stopBtn">ç»“æŸæ¸¸æˆ</button>
    </div>

    <div class="sound-controls">
        <div class="sound-btn active" id="bgmBtn" title="èƒŒæ™¯éŸ³ä¹">ğŸµ</div>
        <div class="sound-btn active" id="sfxBtn" title="éŸ³æ•ˆ">ğŸ”Š</div>
    </div>

    <div class="game-message hidden" id="gameMessage">
        <div class="message-content">
            <h2 class="message-title" id="messageTitle">æ¸¸æˆç»“æŸ</h2>
            <p class="final-score">æœ€ç»ˆå¾—åˆ†: <span id="finalScore">0</span></p>
            <button class="btn btn-start" id="restartBtn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>
</div>

<!-- éŸ³é¢‘å…ƒç´  -->
<audio id="bgm" loop>
    <source src="https://wplcode.xyz:9000/demo/å“ˆåŸºç±³.mp3" type="audio/mpeg">
</audio>

<audio id="hitSound">
    <source src="https://wplcode.xyz:9000/demo/ji.mp3" type="audio/mpeg">
</audio>

<audio id="missSound">
    <source src="https://wplcode.xyz:9000/demo/aiyou.mp3" type="audio/mpeg">
</audio>

<script>
    // æ¸¸æˆé…ç½®
    const config = {
        gameTime: 30, // æ¸¸æˆæ—¶é•¿ï¼ˆç§’ï¼‰
        moleUpTime: [800, 1200], // åœ°é¼ å‡ºç°æ—¶é—´èŒƒå›´ï¼ˆæ¯«ç§’ï¼‰
        moleInterval: [500, 1000], // åœ°é¼ å‡ºç°é—´éš”ï¼ˆæ¯«ç§’ï¼‰
        scorePerMole: 10, // æ¯åªåœ°é¼ å¾—åˆ†
        moleCount: 9 // åœ°é¼ æ´æ•°é‡
    };

    // æ¸¸æˆçŠ¶æ€
    let gameState = {
        score: 0,
        timeLeft: config.gameTime,
        gameActive: false,
        timer: null,
        moleTimer: null,
        soundEnabled: {
            bgm: true,
            sfx: true
        }
    };

    // DOMå…ƒç´ 
    const elements = {
        gameBoard: document.getElementById('gameBoard'),
        scoreDisplay: document.getElementById('score'),
        timeDisplay: document.getElementById('time'),
        startBtn: document.getElementById('startBtn'),
        stopBtn: document.getElementById('stopBtn'),
        gameMessage: document.getElementById('gameMessage'),
        messageTitle: document.getElementById('messageTitle'),
        finalScore: document.getElementById('finalScore'),
        restartBtn: document.getElementById('restartBtn'),
        bgm: document.getElementById('bgm'),
        hitSound: document.getElementById('hitSound'),
        missSound: document.getElementById('missSound'),
        bgmBtn: document.getElementById('bgmBtn'),
        sfxBtn: document.getElementById('sfxBtn')
    };

    // åˆå§‹åŒ–æ¸¸æˆ
    function initGame() {
        createHoles();
        setupEventListeners();
        updateScore(0);
        updateTime(config.gameTime);
    }

    // åˆ›å»ºåœ°é¼ æ´
    function createHoles() {
        elements.gameBoard.innerHTML = '';
        for (let i = 0; i < config.moleCount; i++) {
            const hole = document.createElement('div');
            hole.className = 'hole';

            const mole = document.createElement('div');
            mole.className = 'mole';
            mole.dataset.index = i;
            // ä½¿ç”¨å ä½å›¾ç‰‡ï¼Œæ›¿æ¢ä¸ºé’äº‘å¤´åƒ
            mole.style.backgroundImage = 'url(https://wplcode.xyz:9000/demo/avatar.png)';
            mole.addEventListener('click', hitMole);

            hole.appendChild(mole);
            elements.gameBoard.appendChild(hole);
        }
    }

    // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
    function setupEventListeners() {
        elements.startBtn.addEventListener('click', startGame);
        elements.stopBtn.addEventListener('click', stopGame);
        elements.restartBtn.addEventListener('click', startGame);
        elements.bgmBtn.addEventListener('click', toggleBGM);
        elements.sfxBtn.addEventListener('click', toggleSFX);
    }

    // å¼€å§‹æ¸¸æˆ
    function startGame() {
        if (gameState.gameActive) return;

        resetGame();
        gameState.gameActive = true;
        elements.gameMessage.classList.add('hidden');

        // å¼€å§‹è®¡æ—¶å™¨
        gameState.timer = setInterval(() => {
            gameState.timeLeft--;
            updateTime(gameState.timeLeft);

            if (gameState.timeLeft <= 0) {
                endGame();
            }
        }, 1000);

        // å¼€å§‹åœ°é¼ å‡ºç°å®šæ—¶å™¨
        showRandomMole();

        // æ’­æ”¾èƒŒæ™¯éŸ³ä¹
        if (gameState.soundEnabled.bgm) {
            elements.bgm.play().catch(e => console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥:", e));
        }
    }

    // ç»“æŸæ¸¸æˆ
    function endGame() {
        gameState.gameActive = false;
        clearInterval(gameState.timer);
        clearTimeout(gameState.moleTimer);

        // éšè—æ‰€æœ‰åœ°é¼ 
        document.querySelectorAll('.mole.up').forEach(mole => {
            mole.classList.remove('up');
        });

        // åœæ­¢èƒŒæ™¯éŸ³ä¹
        elements.bgm.pause();

        // æ˜¾ç¤ºç»“æŸç•Œé¢
        elements.finalScore.textContent = gameState.score;
        elements.messageTitle.textContent = 'æ¸¸æˆç»“æŸ';
        elements.gameMessage.classList.remove('hidden');
    }

    // åœæ­¢æ¸¸æˆ
    function stopGame() {
        if (!gameState.gameActive) return;
        endGame();
    }

    // é‡ç½®æ¸¸æˆçŠ¶æ€
    function resetGame() {
        gameState.score = 0;
        gameState.timeLeft = config.gameTime;
        updateScore(0);
        updateTime(config.gameTime);
    }

    // éšæœºæ˜¾ç¤ºåœ°é¼ 
    function showRandomMole() {
        if (!gameState.gameActive) return;

        const holes = document.querySelectorAll('.hole');
        const randomIndex = Math.floor(Math.random() * holes.length);
        const mole = holes[randomIndex].querySelector('.mole');

        // åªæœ‰å½“åœ°é¼ æ´æ˜¯ç©ºçš„æ‰æ˜¾ç¤ºæ–°åœ°é¼ 
        if (!mole.classList.contains('up')) {
            mole.classList.add('up');

            // è®¾ç½®åœ°é¼ æ¶ˆå¤±æ—¶é—´
            const upTime = getRandomValue(config.moleUpTime);
            setTimeout(() => {
                if (mole.classList.contains('up')) {
                    mole.classList.remove('up');
                    // æ’­æ”¾æœªå‡»ä¸­éŸ³æ•ˆ
                    if (gameState.soundEnabled.sfx) {
                        elements.missSound.currentTime = 0;
                        elements.missSound.play().catch(e => console.log("éŸ³æ•ˆæ’­æ”¾å¤±è´¥:", e));
                    }
                }
            }, upTime);
        }

        // è®¾ç½®ä¸‹ä¸€æ¬¡å‡ºç°åœ°é¼ çš„æ—¶é—´
        const nextMoleTime = getRandomValue(config.moleInterval);
        gameState.moleTimer = setTimeout(showRandomMole, nextMoleTime);
    }

    // å‡»ä¸­åœ°é¼ 
    function hitMole(e) {
        if (!gameState.gameActive) return;

        const mole = e.target;
        if (mole.classList.contains('up')) {
            mole.classList.remove('up');
            updateScore(gameState.score + config.scorePerMole);

            // æ’­æ”¾å‡»ä¸­éŸ³æ•ˆ
            if (gameState.soundEnabled.sfx) {
                elements.hitSound.currentTime = 0;
                elements.hitSound.play().catch(e => console.log("éŸ³æ•ˆæ’­æ”¾å¤±è´¥:", e));
            }
        }
    }

    // æ›´æ–°å¾—åˆ†
    function updateScore(newScore) {
        gameState.score = newScore;
        elements.scoreDisplay.textContent = newScore;
    }

    // æ›´æ–°æ—¶é—´
    function updateTime(newTime) {
        gameState.timeLeft = newTime;
        elements.timeDisplay.textContent = newTime;
    }

    // è·å–éšæœºå€¼
    function getRandomValue(range) {
        return Math.floor(Math.random() * (range[1] - range[0] + 1)) + range[0];
    }

    // åˆ‡æ¢èƒŒæ™¯éŸ³ä¹
    function toggleBGM() {
        gameState.soundEnabled.bgm = !gameState.soundEnabled.bgm;
        elements.bgmBtn.classList.toggle('active', gameState.soundEnabled.bgm);

        if (gameState.soundEnabled.bgm && gameState.gameActive) {
            elements.bgm.play().catch(e => console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥:", e));
        } else {
            elements.bgm.pause();
        }
    }

    // åˆ‡æ¢éŸ³æ•ˆ
    function toggleSFX() {
        gameState.soundEnabled.sfx = !gameState.soundEnabled.sfx;
        elements.sfxBtn.classList.toggle('active', gameState.soundEnabled.sfx);
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ¸¸æˆ
    window.addEventListener('DOMContentLoaded', initGame);
</script>
</body>
</html>